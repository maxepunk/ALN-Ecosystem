# ALN Orchestrator Environment Configuration
# Copy this file to .env and adjust values as needed

# ============================================
# SERVER CONFIGURATION
# ============================================
# Node environment: development | test | production
NODE_ENV=development

# Server port (default: 3000)
PORT=3000

# Host binding (0.0.0.0 for all interfaces, 127.0.0.1 for local only)
HOST=0.0.0.0

# ============================================
# VLC CONFIGURATION
# ============================================
# VLC HTTP interface settings
# IMPORTANT: Password must match VLC's --http-password parameter
VLC_HOST=localhost
VLC_PORT=8080
VLC_PASSWORD=vlc

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable video playback through VLC
FEATURE_VIDEO_PLAYBACK=true

# Enable offline queue for disconnected scanners
FEATURE_OFFLINE_MODE=true

# Enable idle loop video when no content is playing
# Set to false when doing hands-on testing/development
FEATURE_IDLE_LOOP=true

# ============================================
# NETWORK CONFIGURATION
# ============================================
# Allowed CORS origins (comma-separated)
# Leave empty to use automatic local network detection (RFC1918 + .local mDNS)
# Regex in app.js automatically allows: 10.x, 172.16-31.x, 192.168.x, *.local
# Only set specific origins if you need to override the automatic detection
CORS_ORIGINS=

# Discovery service for scanner auto-detection
DISCOVERY_ENABLED=true
DISCOVERY_PORT=8888
DISCOVERY_INTERVAL=5000

# ============================================
# SESSION CONFIGURATION
# ============================================
# Session timeout in milliseconds (3600000 = 1 hour)
SESSION_TIMEOUT=3600000

# Persistence directory for sessions and state
PERSISTENCE_DIR=./data

# ============================================
# VIDEO QUEUE CONFIGURATION
# ============================================
# Maximum videos that can be queued
MAX_QUEUE_SIZE=50

# Delay between videos in milliseconds
VIDEO_TRANSITION_DELAY=1000

# Default video duration in seconds (fallback)
DEFAULT_VIDEO_DURATION=30

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: error | warn | info | debug
LOG_LEVEL=info

# Write logs to file (true) or console only (false)
LOG_TO_FILE=true

# Log directory
LOGS_DIR=./logs

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Rate limiting (per IP)
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100

# Admin panel password (leave empty to disable admin)
ADMIN_PASSWORD=

# Test admin password for E2E tests (set to override default @LN-c0nn3ct)
# Used by tests/e2e/helpers/test-config.js for automated testing
TEST_ADMIN_PASSWORD=

# JWT secret for authentication tokens
JWT_SECRET=your-secret-key-here-change-in-production

# ============================================
# HTTPS CONFIGURATION
# ============================================
# Enable HTTPS (required for Web NFC API in scanners)
ENABLE_HTTPS=true

# SSL certificate paths (relative to backend directory)
SSL_KEY_PATH=./ssl/key.pem
SSL_CERT_PATH=./ssl/cert.pem

# HTTP redirect port (for automatic httpâ†’https redirect)
HTTP_REDIRECT_PORT=8000

# ============================================
# DEVELOPMENT OPTIONS
# ============================================
# Enable debug mode (verbose logging)
DEBUG=false

# WebSocket ping settings
WS_PING_INTERVAL=25000
WS_PING_TIMEOUT=60000

# ============================================================
# ENVIRONMENT CONTROL (Phase 0)
# ============================================================

# Bluetooth
BLUETOOTH_SCAN_TIMEOUT_SEC=15
BLUETOOTH_CONNECT_TIMEOUT_SEC=10

# Audio Routing
AUDIO_DEFAULT_OUTPUT=hdmi

# Lighting (Home Assistant)
HOME_ASSISTANT_URL=http://localhost:8123
HOME_ASSISTANT_TOKEN=your-ha-long-lived-access-token
LIGHTING_ENABLED=true